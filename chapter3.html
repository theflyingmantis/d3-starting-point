<html>
<head>
	<title>D3</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
<script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
<script src="https://d3js.org/d3-ease.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-selection.v1.min.js"></script>
<script src="https://d3js.org/d3-timer.v1.min.js"></script>
<script src="https://d3js.org/d3-transition.v1.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js"></script>

</head>
<body>
<script>
function makeData(n){
     var arr = [];
     for (var i=0; i<n; i++){
       arr.push({
         x:Math.floor((Math.random() * 100) + 1),
         y:Math.floor((Math.random() * 100) + 1),
         width:Math.floor((Math.random() * 100) + 1),
         height:Math.floor((Math.random() * 100) + 1)
}) };
return arr; }

var data = makeData(2);
var svg = d3.select("body").append("svg")
      .attr("width", 200)
      .attr("height", 200);
d3.select("body")
  .transition().duration(1000)
    .style("background-color", "red");
var rect = svg.selectAll('rect').data(data);

rect.enter().append('rect')
       .attr('test', function(d,i) {
         // Enter called 2 times only
         console.log('enter placing initial rectangle: ', i)
});

rect.transition().duration(5).attr('x', function(d){
       return d.x; })
         .attr('y', function(d){ return d.y; })
         .attr('width', function(d){ return d.width; })
         .attr('height', function(d){ return d.height; })
         .attr('test', function(d, i) {
           // update every data change
           console.log('updating x position to: ', d.x)
         });


	// var svg = d3.select("body")
 //       .append("svg")
 //       .attr("width", 200)
 //       .attr("height", 200);
 //    svg.selectAll('rect').data([1,2]).enter()
 //    .append('rect')
 //   .attr('x', function(d){ return d*20; })
 //   .attr('y', function(d){ return d*50; })
 //   .attr("width",50)
 //   .attr("height",100);
</script>
</body>
</html>